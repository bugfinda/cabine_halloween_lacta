<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no" />
	<title>Halloween Lacta</title>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="./api.js"></script>
	<script src="./photobooth.js"></script>
	<script src="./spinner.js"></script>
	<script src="./lib/qrcode.min.js"></script>

<body>
	<div id="callToAction" class="cta">
		<video id="ctaVideo" autoplay muted loop playsinline>
			<source src="videos/intro.mp4" type="video/mp4">
			Your browser does not support the video tag.
		</video>
		<div class="cta-btns">
			<button class="cta-btn0" onclick="pickTemplate()"></button>
		</div>
	</div>
	<div class="container">
		<video id="input_video" class="input_video" style="display: none; ">
		</video>
		<canvas id="output_canvas" class="output_canvas" width="1920" height="1080"></canvas>
	</div>
	<div id="overlays" class="overlays">
		<!-- snapshot btn -->
		<button id="snapshotBtn" class="button-capture" onclick="takeSnapshot()">
		</button>

		<!-- previous btn -->
		<button id="previousBtn" class="prev-next-btn" onclick="previousTemplate()">
			<img src="./imgs/previous.png" alt="previous" />
		</button>

		<!-- next btn -->
		<button id="nextBtn" class="prev-next-btn" style="left:unset;right:-20px" onclick="nextTemplate()">
			<img src="./imgs/next.png" alt="previous" />
		</button>

		<!-- click txt -->
		<div class="click-text-container" style="opacity: 0;">
			<img src="./imgs/click_text.png">
		</div>
		<!-- back to cta btn -->
		<button id="changeOverlaysBtn" class="button-capture" style="bottom: 210px; visibility: hidden;"
			onclick="goBackToCallToAction()">
			<img id="underlayBtnImg" src="./templates/options.jpg" alt="underlay" />
		</button>
	</div>
	<!-- timer -->
	<div id="snapshotTimer" class="timer-container"></div>
	<!-- result img -->
	<div id="resultContainer" class="result-image-container" style="display: none;">
		<!-- b-confirmar, b-repetir btns -->
		<div class="result-btns">
			<button id="confirmBtn" class="result-btn" onclick="cancelSnapshot()">
				<img src="./imgs/b-repetir.png" alt="underlay" />
			</button>
			<button id="repeatBtn" class="result-btn" onclick="confirmSnapshot()">
				<img src="./imgs/b-confirmar.png" alt="underlay" />
			</button>
		</div>
	</div>
	<!-- end panel -->
	<div id="endBackPanel" class="end-back-panel" onclick="goBackToStart()">

	</div>
	<!-- qrcode -->
	<div id="qrcode" onclick="goBackToStart()"></div>

	<!-- qr timer controls -->
	<div id="qrTimerControls" style="display: none;">
		<div class="qr-progress-container">
			<div id="qrProgressBar" class="qr-progress-bar"></div>
		</div>
		<button id="addTimeBtn" class="add-time-btn" onclick="addExtraTime()">+10s</button>
	</div>

	<!-- notification panel -->
	<div id="notificationPanel" class="notification-panel-container"
		onclick="document.getElementById('notificationPanel').style.display = 'none'">
		<div class="notification-container">
			<p id="notification"></p>
		</div>
	</div>

	<img src="./templates/qrCodeScreen.jpg" style="display: none;">

	<!-- videoXOffset slider -->
	<input id="videoXOffset" type="range" min="0" max="1000" value="0" class="slider"
		style="position: fixed; bottom: 0; left: 0; width: 100%; z-index: 100; display: none;">
</body>

<style>
	@font-face {
		font-family: "Ringside";
		src: url("fonts/ringsideExtraWide-Bold.otf") format("opentype");
	}

	@font-face {
		font-family: "btnFont";
		src: url("fonts/BeaufortforLOL-Medium.ttf") format('truetype')
	}

	html,
	body {
		margin: 0;
		width: 100%;
		background: #7806b5;
		color: #fff;
		font-size: 1.2em;
		font-family: "Ringside";
		letter-spacing: .5rem;
		text-transform: uppercase;
		user-select: none;
		-webkit-tap-highlight-color: transparent;
		overflow: hidden;
		user-select: none;
	}

	.cta {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		text-align: center;
		color: white;
		background: #7806b5;
		z-index: 1;
	}

	#ctaVideo {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
		z-index: -1;
	}

	.cta img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		opacity: 0.5;
	}

	.cta-btns {
		width: 100%;
		height: 100dvh;
	}

	.cta-btn0 {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: transparent;
		border: none;
		font-size: 20px;
		cursor: pointer;
		outline: none;
		user-select: none;
	}

	.prev-next-btn {
		position: fixed;
		top: 37%;
		left: -10px;
		width: 18%;
		height: 15%;
		padding: 0;
		background: transparent;
		outline: none;
		border: none;

	}

	.prev-next-btn img {
		width: 50%;
		height: 50%;
		object-fit: contain;
	}

	.container {
		position: relative;
		width: 100%;
		height: 100vh;
		background: black;

		display: flex;
		justify-content: center;
		align-items: center;
	}

	.output_canvas {
		position: relative;
		transform: rotate(90deg);
		height: 100vw;
	}

	.overlays {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		z-index: 2;

		display: none;
		justify-content: center;
		align-items: center;
	}

	.click-text-container {
		position: fixed;
		top: 40px;
		left: 42px;

		justify-content: center;
		align-items: center;

	}

	.result-image-container {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		z-index: 100;
		background: #000;
		overflow: hidden;

		display: none;
		justify-content: center;
		align-items: center;
	}

	.result-image {
		position: relative;
		object-fit: cover;
		transform: rotate(90deg);
		transform-origin: center;
		width: 100vh;
		height: 100vw;
		z-index: 1;
	}

	.result-btns {
		position: absolute;
		top: 30vh;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 2;

		display: flex;
		justify-content: center;
		align-items: center;
		overflow: hidden;
	}

	.result-btn {
		position: relative;
		padding: 10px;
		background: transparent;
		outline: none;
		border: none;
	}

	.button-capture {
		position: absolute;
		left: 50%;
		bottom: 10px;
		transform: translate(-50%, 0);
		z-index: 0;
		/* width: 60px; */
		/* height: 60px; */
		border: none;
		border-radius: 10px;
		padding: 16px;
		background: transparent;
		backdrop-filter: blur(10px) brightness(1.1);
		/* background: #eee; */
		cursor: pointer;
		outline: none;
		pointer-events: all;

		display: flex;
		justify-content: center;
		align-items: center;
		overflow: hidden;
	}

	#snapshotBtn {
		width: 60px;
		height: 60px;
		top: 0;
		bottom: 0;
		left: 0;
		width: 100%;
		height: 100%;
		transform: translate(0, 0);
		background: transparent;
		backdrop-filter: none;
	}

	#underlayBtnImg {
		width: 100px;
		height: 100px;
		object-fit: contain;
		transform: rotate(90deg);
	}

	.timer-container {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 100;
		color: #fffa;
		font-size: 240px;
		font-weight: bold;
		pointer-events: none;
		font-family: 'Roboto', 'Arial', sans-serif;

		display: flex;
		justify-content: center;
		align-items: center;
	}


	.end-back-panel {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		z-index: 1000;
		background: #da291c;
		background-image: url("imgs/t-end.png");
		background-repeat: no-repeat;
		background-size: cover;
		background-attachment: fixed;
		background-position: top center;
		overflow: hidden;

		display: none;
		animation: fadeIn 1s;
	}

	#qrcode {
		position: absolute;
		top: 75.2%;
		left: 49.1%;
		transform: translate(-50%, -50%);
		width: 400px;
		height: 400px;
		background: white;
		border-radius: 10px;
		overflow: hidden;
		z-index: 1001;

		display: none;
		justify-content: center;
		align-items: center;
	}

	#qrTimerControls {
		position: absolute;
		top: 89%;
		left: 49.1%;
		transform: translate(-50%, -50%);
		width: 420px;
		z-index: 1002;
		display: none;
		flex-direction: column;
		align-items: center;
		gap: 10px;
	}

	.qr-progress-container {
		width: 100%;
		height: 8px;
		background: rgba(255, 255, 255, 0.3);
		border-radius: 4px;
		overflow: hidden;
		border: 2px solid rgba(255, 255, 255, 0.5);
	}

	.qr-progress-bar {
		height: 100%;
		background: linear-gradient(90deg, #4CAF50, #8BC34A);
		border-radius: 2px;
		transition: width 0.1s ease-out;
		width: 100%;
	}

	.add-time-btn {
		padding: 12px 20px;
		background: rgba(255, 255, 255, 0.9);
		color: #da291c;
		border: none;
		border-radius: 25px;
		font-family: "Ringside";
		font-size: 16px;
		font-weight: bold;
		cursor: pointer;
		transition: all 0.2s ease;
		text-transform: uppercase;
		letter-spacing: 1px;
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
	}

	.add-time-btn:hover {
		background: #ffffff;
		transform: translateY(-2px);
		box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
	}

	.add-time-btn:active {
		transform: translateY(0);
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
	}


	.notification-panel-container {
		position: fixed;
		bottom: 0;
		right: 0;
		width: 100vw;
		height: 100vh;
		z-index: 10;
		background-color: #2227;
		color: #fff;
		padding: 10px;
		font-size: 12px;
		font-family: Arial, sans-serif;

		display: none;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.notification-container {
		position: relative;
		width: 70%;
		background: #da291c;
		border-radius: 10px;
		padding: 20px;

		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	.notification-container p {
		color: #fff;
		font-size: 2em;
		font-family: "Ringside";
		letter-spacing: .3rem;
		text-transform: uppercase;
		user-select: none;
		text-align: center;
	}

	@keyframes fadeIn {
		from {
			opacity: 0;
		}

		to {
			opacity: 1;
		}
	}
</style>

</html>